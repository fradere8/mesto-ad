const j=[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],L=e=>{e.classList.toggle("card__like-button_is-active")},b=e=>{e.remove()},D=()=>document.getElementById("card-template").content.querySelector(".card").cloneNode(!0),C=(e,{onPreviewPicture:t,onLikeIcon:o,onDeleteCard:n})=>{const r=D(),f=r.querySelector(".card__like-button"),P=r.querySelector(".card__control-button_type_delete"),u=r.querySelector(".card__image");return u.src=e.link,u.alt=e.name,r.querySelector(".card__title").textContent=e.name,o&&f.addEventListener("click",()=>o(f)),n&&P.addEventListener("click",()=>n(r)),t&&u.addEventListener("click",()=>t({name:e.name,link:e.link})),r},h=e=>{if(e.key==="Escape"){const t=document.querySelector(".popup_is-opened");c(t)}},i=e=>{e.classList.add("popup_is-opened"),document.addEventListener("keyup",h)},c=e=>{e.classList.remove("popup_is-opened"),document.removeEventListener("keyup",h)},W=e=>{e.querySelector(".popup__close").addEventListener("click",()=>{c(e)}),e.addEventListener("mousedown",o=>{o.target.classList.contains("popup")&&c(e)})};function S(e,t,o,n){let r=e.querySelector("#"+t.id+"-error");t.classList.add(n.inputErrorClass),r.textContent=o,r.classList.add(n.errorClass)}function E(e,t,o){let n=e.querySelector("#"+t.id+"-error");t.classList.remove(o.inputErrorClass),n.classList.remove(o.errorClass),n.textContent=""}function V(e,t,o){t.validity.valid?E(e,t,o):t.validity.patternMismatch&&t.hasAttribute("data-error-message")?S(e,t,t.dataset.errorMessage,o):S(e,t,t.validationMessage,o)}function T(e){return e.some(function(t){return!t.validity.valid})}function B(e,t){e.classList.add(t.inactiveButtonClass),e.disabled=!0}function N(e,t){e.classList.remove(t.inactiveButtonClass),e.disabled=!1}function k(e,t,o){T(e)?B(t,o):N(t,o)}function z(e,t){let o=Array.from(e.querySelectorAll(t.inputSelector)),n=e.querySelector(t.submitButtonSelector);k(o,n,t),o.forEach(function(r){r.addEventListener("input",function(){V(e,r,t),k(o,n,t)})})}function d(e,t){const o=Array.from(e.querySelectorAll(t.inputSelector)),n=e.querySelector(t.submitButtonSelector);o.forEach(function(r){E(e,r,t),r.setCustomValidity("")}),e.reset(),B(n,t)}function U(e){Array.from(document.querySelectorAll(e.formSelector)).forEach(function(o){z(o,e)})}const l={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"};U(l);const g=document.querySelector(".places__list"),_=document.querySelector(".popup_type_edit"),p=_.querySelector(".popup__form"),x=p.querySelector(".popup__input_type_name"),I=p.querySelector(".popup__input_type_description"),m=document.querySelector(".popup_type_new-card"),a=m.querySelector(".popup__form"),$=a.querySelector(".popup__input_type_card-name"),G=a.querySelector(".popup__input_type_url"),y=document.querySelector(".popup_type_image"),q=y.querySelector(".popup__image"),H=y.querySelector(".popup__caption"),J=document.querySelector(".profile__edit-button"),K=document.querySelector(".profile__add-button"),F=document.querySelector(".profile__title"),A=document.querySelector(".profile__description"),M=document.querySelector(".profile__image"),v=document.querySelector(".popup_type_edit-avatar"),s=v.querySelector(".popup__form"),O=s.querySelector(".popup__input"),w=({name:e,link:t})=>{q.src=t,q.alt=e,H.textContent=e,i(y)},Q=e=>{e.preventDefault(),F.textContent=x.value,A.textContent=I.value,c(_)},R=e=>{e.preventDefault(),M.style.backgroundImage=`url(${O.value})`,c(v)},X=e=>{e.preventDefault(),g.prepend(C({name:$.value,link:G.value},{onPreviewPicture:w,onLikeIcon:L,onDeleteCard:b})),c(m)};p.addEventListener("submit",Q);a.addEventListener("submit",X);s.addEventListener("submit",R);J.addEventListener("click",()=>{x.value=F.textContent,I.value=A.textContent,d(p,l),i(_)});M.addEventListener("click",()=>{s.reset(),d(s,l),i(v)});K.addEventListener("click",()=>{a.reset(),d(a,l),i(m)});j.forEach(e=>{g.append(C(e,{onPreviewPicture:w,onLikeIcon:L,onDeleteCard:b}))});const Y=document.querySelectorAll(".popup");Y.forEach(e=>{W(e)});
