const P=[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],q=e=>{e.classList.toggle("card__like-button_is-active")},L=e=>{e.remove()},j=()=>document.getElementById("card-template").content.querySelector(".card").cloneNode(!0),b=(e,{onPreviewPicture:t,onLikeIcon:o,onDeleteCard:r})=>{const n=j(),f=n.querySelector(".card__like-button"),M=n.querySelector(".card__control-button_type_delete"),u=n.querySelector(".card__image");return u.src=e.link,u.alt=e.name,n.querySelector(".card__title").textContent=e.name,o&&f.addEventListener("click",()=>o(f)),r&&M.addEventListener("click",()=>r(n)),t&&u.addEventListener("click",()=>t({name:e.name,link:e.link})),n},C=e=>{if(e.key==="Escape"){const t=document.querySelector(".popup_is-opened");c(t)}},i=e=>{e.classList.add("popup_is-opened"),document.addEventListener("keyup",C)},c=e=>{e.classList.remove("popup_is-opened"),document.removeEventListener("keyup",C)},D=e=>{e.querySelector(".popup__close").addEventListener("click",()=>{c(e)}),e.addEventListener("mousedown",o=>{o.target.classList.contains("popup")&&c(e)})};function W(e,t,o){let r=e.querySelector("#"+t.id+"-error");t.classList.add(o.inputErrorClass),r.textContent=t.validationMessage,r.classList.add(o.errorClass)}function h(e,t,o){let r=e.querySelector("#"+t.id+"-error");t.classList.remove(o.inputErrorClass),r.classList.remove(o.errorClass),r.textContent=""}function T(e,t,o){t.validity.valid?h(e,t,o):W(e,t,o)}function V(e){return e.some(function(t){return!t.validity.valid})}function E(e,t){e.classList.add(t.inactiveButtonClass),e.disabled=!0}function N(e,t){e.classList.remove(t.inactiveButtonClass),e.disabled=!1}function S(e,t,o){V(e)?E(t,o):N(t,o)}function z(e,t){let o=Array.from(e.querySelectorAll(t.inputSelector)),r=e.querySelector(t.submitButtonSelector);S(o,r,t),o.forEach(function(n){n.addEventListener("input",function(){T(e,n,t),S(o,r,t)})})}function d(e,t){let o=Array.from(e.querySelectorAll(t.inputSelector)),r=e.querySelector(t.submitButtonSelector);o.forEach(function(n){h(e,n,t)}),E(r,t)}function U(e){Array.from(document.querySelectorAll(e.formSelector)).forEach(function(o){z(o,e)})}const p={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"};U(p);const B=document.querySelector(".places__list"),_=document.querySelector(".popup_type_edit"),s=_.querySelector(".popup__form"),g=s.querySelector(".popup__input_type_name"),x=s.querySelector(".popup__input_type_description"),m=document.querySelector(".popup_type_new-card"),l=m.querySelector(".popup__form"),$=l.querySelector(".popup__input_type_card-name"),G=l.querySelector(".popup__input_type_url"),y=document.querySelector(".popup_type_image"),k=y.querySelector(".popup__image"),H=y.querySelector(".popup__caption"),J=document.querySelector(".profile__edit-button"),K=document.querySelector(".profile__add-button"),I=document.querySelector(".profile__title"),F=document.querySelector(".profile__description"),w=document.querySelector(".profile__image"),v=document.querySelector(".popup_type_edit-avatar"),a=v.querySelector(".popup__form"),O=a.querySelector(".popup__input"),A=({name:e,link:t})=>{k.src=t,k.alt=e,H.textContent=e,i(y)},Q=e=>{e.preventDefault(),I.textContent=g.value,F.textContent=x.value,c(_)},R=e=>{e.preventDefault(),w.style.backgroundImage=`url(${O.value})`,c(v)},X=e=>{e.preventDefault(),B.prepend(b({name:$.value,link:G.value},{onPreviewPicture:A,onLikeIcon:q,onDeleteCard:L})),c(m)};s.addEventListener("submit",Q);l.addEventListener("submit",X);a.addEventListener("submit",R);J.addEventListener("click",()=>{g.value=I.textContent,x.value=F.textContent,d(s,p),i(_)});w.addEventListener("click",()=>{a.reset(),d(a,p),i(v)});K.addEventListener("click",()=>{l.reset(),d(l,p),i(m)});P.forEach(e=>{B.append(b(e,{onPreviewPicture:A,onLikeIcon:q,onDeleteCard:L}))});const Y=document.querySelectorAll(".popup");Y.forEach(e=>{D(e)});
